name: 'Streamr Docker Dev Action'
description: 'Start Streamr Docker Stack'
inputs:
  services-to-start:
    description: 'Streamr Docker Stack services to start'
    required: false
    default: 'mysql redis engine-and-editor cassandra parity-node0 parity-sidechain-node0 bridge data-union-server broker-node-storage-1 nginx smtp platform'
#outputs:
#  random-number: 
#    description: "Random number"
#    value: ${{ steps.random-number-generator.outputs.random-id }}
runs:
  using: "composite"
  steps:
    - name: Checkout Streamr Docker Dev
      uses: actions/checkout@v2
      with:
        repository: streamr-dev/streamr-docker-dev
      path: streamr-docker-dev
    - name: Start Streamr Docker Stack
      run: |
          sudo ifconfig docker0 10.200.10.1/24
          ./streamr-docker-dev/bin.sh start ${{ inputs.services-to-start }}
          ./streamr-docker-dev/bin.sh wait
      working-directory: streamr-docker-dev
